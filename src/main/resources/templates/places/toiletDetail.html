<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Toilet Detail</title>
</head>
<body>
<h1>Toilet Detail</h1>
<a th:href="@{/place/search/result(type=${type}, distance=${distance}, lat=${lat}, lng=${lng})}">
    <button>목록으로</button>
</a>
<div>
    <p>ID: <span th:text="${toilet.id}"></span></p>
    <p>이름: <span th:text="${toilet.name}"></span></p>
    <p>주소: <span th:text="${toilet.address}"></span></p>
    <p>위도: <span th:text="${toilet.latitude}"></span></p>
    <p>경도: <span th:text="${toilet.longitude}"></span></p>
    <p>개방시간: <span th:text="${toilet.openingHours}"></span></p>
    <p>비상벨: <span th:text="${toilet.emergencyBell}"></span></p>
    <p>기저귀 교환대: <span th:text="${toilet.diaperChange}"></span></p>
</div>
<!-- 평가 -->
<!-- 댓글달기 -->
<form method="post" th:action="@{/placelist/toilet/{placeId}/save-evaluation(placeId=${toilet.id})}">
    <input type="hidden" name="username" th:value="${user.name}">
    <!--뒤로가기 보전을 위한 부분-->
    <input type="hidden" name="type" th:value="${type}">
    <input type="hidden" name="distance" th:value="${distance}">
    <input type="hidden" name="lat" th:value="${lat}">
    <input type="hidden" name="lng" th:value="${lng}">
    <!--뒤로가기 보전을 위한 부분-->
    <input type="text" name="comment" placeholder="댓글을 입력하세요" required>
    <input type="submit" value="댓글 작성">
</form>
<!-- 댓글표시 -->
<div>
    <h3>댓글</h3>
    <div th:each="evaluation : ${evaluations}">
        <span th:text="${evaluation.getUsername()}"></span> :
        <span th:text="${evaluation.comment}"></span>
        <div th:if="${evaluation.getUsername()} == ${user.name}">
            <form method="post" th:action="@{/evaluation/delete-evaluation}">
                <input type="hidden" name="evaluationId" th:value="${evaluation.id}">
                <input type="hidden" name="placeType" value="toilet">
                <input type="hidden" name="placeId" th:value="${toilet.id}">
                <!--뒤로가기 보전을 위한 부분-->
                <input type="hidden" name="type" th:value="${type}">
                <input type="hidden" name="distance" th:value="${distance}">
                <input type="hidden" name="lat" th:value="${lat}">
                <input type="hidden" name="lng" th:value="${lng}">
                <!--뒤로가기 보전을 위한 부분-->
                <input type="submit" value="삭제">
            </form>
        </div>
        <br>
    </div>
</div>
<!--end 평가-->
</body>
</html>
